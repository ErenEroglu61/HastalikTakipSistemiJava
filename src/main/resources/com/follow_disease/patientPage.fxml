<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<AnchorPane prefHeight="700.0" prefWidth="1200.0"
            style="-fx-background-color: #F1F5F9;"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.follow_disease.controller.PatientController">

    <children>

        <!-- SOL PANEL -->
        <VBox prefWidth="300.0"
              style="-fx-background-color: #F8FAFC;"
              AnchorPane.topAnchor="0.0"
              AnchorPane.bottomAnchor="0.0">

            <children>

                <!-- PROFÄ°L -->
                <VBox alignment="CENTER" spacing="15.0">
                    <padding>
                        <Insets top="40.0" bottom="20.0"/>
                    </padding>

                    <children>
                        <HBox alignment="CENTER" spacing="10.0">
                            <children>

                                <StackPane>
                                    <children>
                                        <Circle radius="60.0"
                                                fill="#D32F2F"
                                                stroke="WHITE"
                                                strokeWidth="4.0">
                                            <effect>
                                                <DropShadow radius="10.0" color="#00000033"/>
                                            </effect>
                                        </Circle>
                                        <Label text="ðŸ‘¤"
                                               textFill="WHITE"
                                               style="-fx-font-size: 50;"/>
                                    </children>
                                </StackPane>

                                <!-- BÄ°LDÄ°RÄ°M -->
                                <StackPane alignment="TOP_RIGHT"
                                           prefWidth="40"
                                           prefHeight="40">
                                    <children>

                                        <MenuButton fx:id="notificationMenuButton"
                                                    onShowing="#handleNotificationShowing"
                                                    contentDisplay="GRAPHIC_ONLY"
                                                    mnemonicParsing="false"
                                                    prefWidth="40"
                                                    prefHeight="40"
                                                    style="-fx-background-color: #F1F5F9;
                                                           -fx-background-radius: 50;
                                                           -fx-cursor: hand;
                                                           -fx-padding: 8;">

                                            <graphic>
                                                <ImageView fitWidth="40"
                                                           fitHeight="40"
                                                           preserveRatio="true">
                                                    <image>
                                                        <Image url="@/notification.png"/>
                                                    </image>
                                                </ImageView>
                                            </graphic>

                                            <effect>
                                                <DropShadow radius="6.0"
                                                            offsetY="2.0"
                                                            color="#00000015"/>
                                            </effect>
                                        </MenuButton>

                                        <Circle fx:id="notificationBadge"
                                                radius="5.0"
                                                fill="#D32F2F"
                                                stroke="WHITE"
                                                strokeWidth="1.5"
                                                visible="false">
                                            <StackPane.margin>
                                                <Insets top="-1" right="-1"/>
                                            </StackPane.margin>
                                        </Circle>

                                    </children>
                                </StackPane>

                            </children>
                        </HBox>

                        <Label fx:id="nameLabel"
                               text="-"
                               textFill="#334155"
                               style="-fx-font-size: 20; -fx-font-weight: bold;"/>

                        <Label text="Hasta Profili"
                               textFill="#64748B"
                               style="-fx-font-size: 14;"/>

                    </children>
                </VBox>

                <Separator prefWidth="200">
                    <VBox.margin>
                        <Insets left="40" right="40" bottom="20"/>
                    </VBox.margin>
                </Separator>

                <!-- BÄ°LGÄ°LER -->
                <VBox spacing="10">
                    <padding>
                        <Insets left="30" right="30"/>
                    </padding>

                    <children>
                        <!-- TekrarlÄ± bloklar -->
                        <VBox spacing="2" style="-fx-background-color:#E3F2FD; -fx-background-radius:10; -fx-padding:7 12;">
                            <Label text="E-POSTA" style="-fx-font-size:8; -fx-font-weight:bold;" textFill="#1976D2"/>
                            <Label fx:id="emailLabel" text="..." style="-fx-font-size:11; -fx-font-weight:bold;" textFill="#0D47A1"/>
                        </VBox>

                        <VBox spacing="2" style="-fx-background-color:#E3F2FD; -fx-background-radius:10; -fx-padding:7 12;">
                            <Label text="TC KÄ°MLÄ°K NO" style="-fx-font-size:8; -fx-font-weight:bold;" textFill="#1976D2"/>
                            <Label fx:id="tcLabel" text="-" style="-fx-font-size:11; -fx-font-weight:bold;" textFill="#0D47A1"/>
                        </VBox>

                        <VBox spacing="2" style="-fx-background-color:#E3F2FD; -fx-background-radius:10; -fx-padding:7 12;">
                            <Label text="YAÅž" style="-fx-font-size:8; -fx-font-weight:bold;" textFill="#1976D2"/>
                            <Label fx:id="ageLabel" text="-" style="-fx-font-size:11; -fx-font-weight:bold;" textFill="#0D47A1"/>
                        </VBox>

                        <VBox spacing="2" style="-fx-background-color:#E3F2FD; -fx-background-radius:10; -fx-padding:7 12;">
                            <Label text="CÄ°NSÄ°YET" style="-fx-font-size:8; -fx-font-weight:bold;" textFill="#1976D2"/>
                            <Label fx:id="genderLabel" text="-" style="-fx-font-size:11; -fx-font-weight:bold;" textFill="#0D47A1"/>
                        </VBox>

                        <VBox spacing="2" style="-fx-background-color:#E3F2FD; -fx-background-radius:10; -fx-padding:7 12;">
                            <Label text="TELEFON" style="-fx-font-size:8; -fx-font-weight:bold;" textFill="#1976D2"/>
                            <Label fx:id="phoneLabel" text="-" style="-fx-font-size:11; -fx-font-weight:bold;" textFill="#0D47A1"/>
                        </VBox>

                        <VBox spacing="2" style="-fx-background-color:#E3F2FD; -fx-background-radius:10; -fx-padding:7 12;">
                            <Label text="ÅžÄ°FRE" style="-fx-font-size:8; -fx-font-weight:bold;" textFill="#1976D2"/>
                            <Label fx:id="passwordLabel" text="-" style="-fx-font-size:11; -fx-font-weight:bold;" textFill="#0D47A1"/>
                        </VBox>
                    </children>
                </VBox>

                <Region VBox.vgrow="ALWAYS"/>

                <!-- BUTONLAR -->
                <VBox spacing="10" alignment="CENTER">
                    <padding>
                        <Insets left="30" right="30" bottom="30"/>
                    </padding>

                    <children>
                        <Button fx:id="updateButton"
                                text="PROFÄ°LÄ°MÄ° GÃœNCELLE"
                                maxWidth="Infinity"
                                prefHeight="40"
                                onAction="#handleUpdateAction"
                                style="-fx-background-color:#1976D2; -fx-text-fill:white; -fx-font-weight:bold; -fx-background-radius:10;"/>

                        <Button fx:id="logoutButton"
                                text="Ã‡IKIÅž YAP"
                                maxWidth="Infinity"
                                prefHeight="40"
                                onAction="#handleLogout"
                                style="-fx-background-color:#D32F2F; -fx-text-fill:white; -fx-font-weight:bold; -fx-background-radius:10;"/>
                    </children>
                </VBox>

            </children>
        </VBox>

        <!-- SAÄž PANEL -->
        <VBox AnchorPane.topAnchor="20"
              AnchorPane.bottomAnchor="20"
              AnchorPane.leftAnchor="320"
              AnchorPane.rightAnchor="20">

            <children>
                <VBox VBox.vgrow="ALWAYS"
                      style="-fx-background-color:white; -fx-background-radius:25;">
                    <effect>
                        <DropShadow radius="15" color="#0000001a"/>
                    </effect>

                    <!-- BAÅžLIK -->
                    <HBox prefHeight="60"
                          alignment="CENTER_LEFT"
                          style="-fx-background-color:#D32F2F; -fx-background-radius:25 25 0 0;">
                        <padding>
                            <Insets left="30"/>
                        </padding>
                        <Label text="SaÄŸlÄ±k Durumu Takip Paneli"
                               textFill="WHITE"
                               style="-fx-font-size:18; -fx-font-weight:bold;"/>
                    </HBox>

                    <!-- Ä°Ã‡ERÄ°K -->
                    <GridPane hgap="20" vgap="20" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="20" left="25" right="25" bottom="20"/>
                        </padding>

                        <columnConstraints>
                            <ColumnConstraints percentWidth="50"/>
                            <ColumnConstraints percentWidth="50"/>
                        </columnConstraints>

                        <rowConstraints>
                            <RowConstraints percentHeight="50"/>
                            <RowConstraints percentHeight="50"/>
                        </rowConstraints>

                        <children>

                            <!-- AKTÄ°F HASTALIK -->
                            <VBox spacing="10" style="-fx-border-color:#E2E8F0; -fx-border-width:0 1 1 0;">
                                <Label text="âœ“ Aktif HastalÄ±klarÄ±m" style="-fx-font-size:16; -fx-font-weight:bold;"/>
                                <ScrollPane fitToWidth="true">
                                    <content>
                                        <VBox fx:id="vboxActiveDiseases" spacing="10"/>
                                    </content>
                                </ScrollPane>
                                <Button fx:id="btnContactDoctor"
                                        text="âœ‰ï¸ DOKTORLA Ä°LETÄ°ÅžÄ°M KUR"
                                        maxWidth="Infinity"
                                        prefHeight="35"
                                        onAction="#handleContactDoctor"
                                        style="-fx-background-color:#1976D2; -fx-text-fill:white; -fx-font-weight:bold; -fx-background-radius:10;"/>
                            </VBox>

                            <!-- GEÃ‡MÄ°Åž HASTALIK -->
                            <VBox GridPane.columnIndex="1" spacing="10">
                                <Label text="âŒ› GeÃ§miÅŸ HastalÄ±klarÄ±m" style="-fx-font-size:16; -fx-font-weight:bold;" textFill="#64748B"/>
                                <ScrollPane fitToWidth="true">
                                    <content>
                                        <VBox fx:id="vboxDiseasesHistory" spacing="10"/>
                                    </content>
                                </ScrollPane>
                            </VBox>

                            <!-- AKTÄ°F Ä°LAÃ‡ -->
                            <VBox GridPane.rowIndex="1" spacing="10">
                                <Label text="ðŸ’Š Aktif Ä°laÃ§larÄ±m" style="-fx-font-size:16; -fx-font-weight:bold;"/>
                                <ScrollPane fitToWidth="true">
                                    <content>
                                        <VBox fx:id="vboxActiveMedicines" spacing="10"/>
                                    </content>
                                </ScrollPane>
                            </VBox>

                            <!-- GEÃ‡MÄ°Åž Ä°LAÃ‡ -->
                            <VBox GridPane.columnIndex="1" GridPane.rowIndex="1" spacing="10">
                                <Label text="âŒ› GeÃ§miÅŸ Ä°laÃ§larÄ±m" style="-fx-font-size:16; -fx-font-weight:bold;" textFill="#64748B"/>
                                <ScrollPane fitToWidth="true">
                                    <content>
                                        <VBox fx:id="vboxPastMedicines" spacing="10"/>
                                    </content>
                                </ScrollPane>
                            </VBox>

                        </children>
                    </GridPane>

                </VBox>
            </children>
        </VBox>

    </children>
</AnchorPane>
